---
const navLinks = [
  { label: "Features", href: "#features" },
  { label: "How It Works", href: "#how-it-works" },
  { label: "Pilot Program", href: "#pilot" },
];
---

<nav
  id="navbar"
  aria-label="Main navigation"
  class="fixed top-0 left-0 w-full z-50 bg-black/80 backdrop-blur-sm border-b border-white/[0.06] transition-colors duration-300"
>
  <div class="max-w-7xl mx-auto flex items-center justify-between px-4 sm:px-6 lg:px-8 py-5">
    <!-- Logo -->
    <a href="#" class="flex items-center gap-3 text-2xl font-medium tracking-[0.3em] text-white uppercase">
      <svg class="w-10 h-10 shrink-0" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <!-- Chalice rim -->
        <path d="M16 34h48" stroke="white" stroke-width="2.5" stroke-linecap="round"/>
        <!-- Chalice bowl -->
        <path d="M18 34c1 10 9 16 22 16s21-6 22-16" stroke="white" stroke-width="1.8" fill="none"/>
        <!-- Chalice stem -->
        <path d="M37 50v12" stroke="white" stroke-width="1.8"/>
        <path d="M43 50v12" stroke="white" stroke-width="1.8"/>
        <!-- Chalice base -->
        <path d="M37 62l-7 4h20l-7-4" stroke="white" stroke-width="1.8" stroke-linejoin="round" fill="none"/>
        <path d="M26 66h28" stroke="white" stroke-width="2.5" stroke-linecap="round"/>

        <!-- Snake body — S-curve from tail near base up past bowl -->
        <path d="M50 64 C56 58, 54 50, 46 48 C38 46, 30 42, 30 36 C30 30, 36 26, 42 24 C48 22, 52 16, 50 12 C48 8, 44 6, 40 8" stroke="white" stroke-width="5" stroke-linecap="round" fill="none"/>

        <!-- Snake head — curved diamond, wider than body -->
        <path d="M40 8 C44 6, 42 2, 36 0 C32-1, 26 2, 26 6 C26 10, 30 13, 36 12 C40 11, 42 10, 40 8z" fill="white"/>

        <!-- Jaw line -->
        <path d="M36 12 C32 12, 28 10, 26 6" stroke="white" stroke-width="0.8" fill="none" opacity="0.4"/>

        <!-- Eye — dark with highlight -->
        <circle cx="34" cy="5" r="2" fill="black"/>
        <circle cx="34.6" cy="4.4" r="0.7" fill="white"/>

        <!-- Nostril -->
        <circle cx="28.5" cy="3.5" r="0.7" fill="black" opacity="0.5"/>

        <!-- Forked tongue -->
        <path d="M26 5 L20 2 M26 5 L20 8" stroke="white" stroke-width="1.2" stroke-linecap="round"/>
      </svg>
      EDICT HEALTH
    </a>

    <!-- Desktop links -->
    <div class="hidden md:flex items-center gap-10">
      {navLinks.map((link) => (
        <a
          href={link.href}
          class="text-sm tracking-widest uppercase text-gray-500 hover:text-white transition-colors duration-300"
        >
          {link.label}
        </a>
      ))}
      <a
        href="#contact"
        class="text-sm tracking-widest uppercase text-gray-500 hover:text-white transition-colors duration-300"
      >
        Contact <span class="ml-1">&rarr;</span>
      </a>
    </div>

    <!-- Mobile hamburger -->
    <button
      id="menu-toggle"
      type="button"
      class="md:hidden relative w-10 h-10 flex items-center justify-center text-gray-500 hover:text-white transition-colors"
      aria-label="Open menu"
      aria-expanded="false"
    >
      <svg id="icon-hamburger" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
        <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
      <svg id="icon-close" class="w-5 h-5 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
  </div>

  <!-- Mobile menu overlay -->
  <div
    id="mobile-menu"
    class="fixed inset-0 top-0 bg-black/98 flex flex-col items-center justify-center gap-10 md:hidden transition-opacity duration-300 opacity-0 pointer-events-none"
  >
    {navLinks.map((link) => (
      <a
        href={link.href}
        class="mobile-nav-link text-lg tracking-widest uppercase text-gray-500 hover:text-white transition-colors duration-300"
      >
        {link.label}
      </a>
    ))}
    <a
      href="#contact"
      class="mobile-nav-link text-lg tracking-widest uppercase text-gray-500 hover:text-white transition-colors duration-300"
    >
      Contact <span class="ml-1">&rarr;</span>
    </a>
  </div>
</nav>

<style>
  #mobile-menu.open {
    opacity: 1;
    pointer-events: auto;
  }
</style>

<script>
  const toggle = document.getElementById("menu-toggle")!;
  const menu = document.getElementById("mobile-menu")!;
  const iconOpen = document.getElementById("icon-hamburger")!;
  const iconClose = document.getElementById("icon-close")!;
  const mobileLinks = menu.querySelectorAll(".mobile-nav-link");

  function setMenuOpen(open: boolean) {
    menu.classList.toggle("open", open);
    iconOpen.classList.toggle("hidden", open);
    iconClose.classList.toggle("hidden", !open);
    toggle.setAttribute("aria-expanded", String(open));
    toggle.setAttribute("aria-label", open ? "Close menu" : "Open menu");
    document.body.style.overflow = open ? "hidden" : "";
  }

  toggle.addEventListener("click", () => {
    const isOpen = menu.classList.contains("open");
    setMenuOpen(!isOpen);
  });

  mobileLinks.forEach((link) => {
    link.addEventListener("click", () => setMenuOpen(false));
  });
</script>
